<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Timer - TerraME</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Timer";
        var mkdocs_page_input_path = "base/types/timer.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/terrameee.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">TerraME: Multiparadigm Modeling Toolkit</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Base</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../">Index</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Types</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../agent/">Agent</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../automaton/">Automaton</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cell/">Cell</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cellularSpace/">CellularSpace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../chart/">Chart</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../choice/">Choice</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../clock/">Clock</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../dataFrame/">DataFrame</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../directory/">Directory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../environment/">Environment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../event/">Event</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../file/">File</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../flow/">Flow</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../group/">Group</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../internetSender/">InternetSender</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../jump/">Jump</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../log/">Log</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mandatory/">Mandatory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../map/">Map</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../model/">Model</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../neighborhood/">Neighborhood</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../profiler/">Profiler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../random/">Random</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../socialNetwork/">SocialNetwork</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../society/">Society</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../state/">State</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../textScreen/">TextScreen</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Timer</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#arguments">Arguments</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add">add</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_1">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_1">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#clear">clear</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_2">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#getevents">getEvents</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_3">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gettime">getTime</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_4">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#notify">notify</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_5">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#reset">reset</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_6">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#run">run</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_2">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_7">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#timer-timer-eventaction-function-printstep-end-timerrun10">timer = Timer{ Event{action = function() print(&quot;step&quot;) end} } timer:run(10)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_1">#</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_8">Usage</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trajectory/">Trajectory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../unitTest/">UnitTest</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../visualTable/">VisualTable</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Functions</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/errorHandling/">ErrorHandling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/os/">Os</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/package/">Package</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/utils/">Utils</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/">Examples</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../data/">Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../font/">Font</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">TerraME</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Base</li>
          <li class="breadcrumb-item">Types</li>
      <li class="breadcrumb-item active">Timer</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="timer">Timer</h1>
<p>A Timer is an event-based scheduler that runs the simulation. It contains a set of <a href="../event/">Events</a>, allowing the simulation to work with processes that start independently and act in different periodicities. As default, it execute the Events in the order they were declared, but the arguments of Event (start, priority, and period) can change this order. Once a Timer has a given simulation time, it ensures that all the Events before that time were already executed. See <a href="./#run">run()</a> for more details.  </p>
<h3 id="arguments">Arguments</h3>
<ul>
<li><strong>...</strong>: A set of Events.</li>
</ul>
<h3 id="attributes">Attributes</h3>
<p>Some attributes of Timer have internal semantics. They can be used as <strong>read-only</strong> by the modeler.</p>
<ul>
<li><strong>cObj_</strong>: A pointer to a C++ representation of the Timer. Never use this object.</li>
<li><strong>events</strong>: An ordered vector with the Events.</li>
<li><strong>time</strong>: The current simulation time.</li>
</ul>
<h3 id="usage">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function()
        print(&quot;each time step&quot;)
    end},
    Event{period = 2, action = function()
        print(&quot;each two time steps&quot;)
    end},
    Event{priority = &quot;high&quot;, period = 4, action = function()
        print(&quot;each four time steps&quot;)
    end}
}

timer:run(10)
</code></pre></div>
<hr />
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="./#add">add</a></td>
<td>Add a new <a href="../event/">Event</a> to the timer.</td>
</tr>
<tr>
<td><a href="./#clear">clear</a></td>
<td>Remove all the <a href="../event/">Events</a> from the Timer.</td>
</tr>
<tr>
<td><a href="./#getevents">getEvents</a></td>
<td>Return a vector with the <a href="../event/">Events</a> of the Timer.</td>
</tr>
<tr>
<td><a href="./#gettime">getTime</a></td>
<td>Return the current simulation time.</td>
</tr>
<tr>
<td><a href="./#notify">notify</a></td>
<td>Notify every Observer connected to the Timer.</td>
</tr>
<tr>
<td><a href="./#reset">reset</a></td>
<td>Reset the Timer to time minus infinite, keeping the same <a href="../event/">Event</a> queue.</td>
</tr>
<tr>
<td><a href="./#run">run</a></td>
<td>Run the Timer until a given final time.</td>
</tr>
<tr>
<td><a href="./##">#</a></td>
<td>Return the number of <a href="../event/">Events</a> in the Timer.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="add"><strong>add</strong></h2>
<p>Add a new <a href="../event/">Event</a> to the timer. If the Event has a start time less than the current simulation time then add() will prompt a warning (but the Event will be added).  </p>
<h3 id="arguments_1">Arguments</h3>
<ul>
<li><strong>#1</strong>: An Event or table. When adding a table, this function converts the table into an Event.</li>
</ul>
<h3 id="usage_1">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{}

timer:add(Event{action = function() end})
</code></pre></div>
<hr />
<h2 id="clear"><strong>clear</strong></h2>
<p>Remove all the <a href="../event/">Events</a> from the Timer. Note that, when this function is called within an action of an Event, if such function does not return false, it will be added to the Timer again after the end of its execution. This means that the simulation will continue with a single Event until its final time.  </p>
<h3 id="usage_2">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

timer:clear()
</code></pre></div>
<hr />
<h2 id="getevents"><strong>getEvents</strong></h2>
<p>Return a vector with the <a href="../event/">Events</a> of the Timer.  </p>
<h3 id="usage_3">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

print(timer:getEvents()[1]:getTime())
</code></pre></div>
<hr />
<h2 id="gettime"><strong>getTime</strong></h2>
<p>Return the current simulation time.  </p>
<h3 id="usage_4">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

timer:run(10)
print(timer:getTime())
</code></pre></div>
<hr />
<h2 id="notify"><strong>notify</strong></h2>
<p>Notify every Observer connected to the Timer.  </p>
<h3 id="usage_5">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

Clock{target = timer}

timer:run(10)

timer:notify()
</code></pre></div>
<hr />
<h2 id="reset"><strong>reset</strong></h2>
<p>Reset the Timer to time minus infinite, keeping the same <a href="../event/">Event</a> queue.  </p>
<h3 id="usage_6">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

Clock{target = timer}

timer:run(10)

timer:reset()
print(timer:getTime())
</code></pre></div>
<hr />
<h2 id="run"><strong>run</strong></h2>
<p>Run the Timer until a given final time. It manages the <a href="../event/">Event</a> queue according to their execution times and priorities. The Event with lower time will be executed in each step. If there are two Events to be executed at the same time, it executes the one with lower priority. If both have the same priority, it executes the one that was scheuled first for that time. In order to activate an Event, the Timer executes its action, passing the Event itself as argument. If the action of the Event does not return false, the Event is scheduled to execute again according to its period. The Timer then repeats its execution again and again. It stops only when all its Events are scheduled to execute after the final time, or when there are no remaining Events.  </p>
<h3 id="arguments_2">Arguments</h3>
<ul>
<li><strong>#1</strong>: A number representing the final time of the simulation. This argument is mandatory.</li>
</ul>
<h3 id="usage_7">Usage</h3>
<h2 id="timer-timer-eventaction-function-printstep-end-timerrun10"><div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function() print(&quot;step&quot;) end}
}

timer:run(10)
</code></pre></div></h2>
<h2 id="_1"><strong>#</strong></h2>
<p>Return the number of <a href="../event/">Events</a> in the Timer.  </p>
<h3 id="usage_8">Usage</h3>
<div class="highlight"><pre><span></span><code>timer = Timer{
    Event{action = function()
        print(&quot;each time step&quot;)
    end},
    Event{period = 2, action = function()
        print(&quot;each two time steps&quot;)
    end}
}

print(#timer)
</code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../textScreen/" class="btn btn-neutral float-left" title="TextScreen"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../trajectory/" class="btn btn-neutral float-right" title="Trajectory">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2024 TerraME</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../textScreen/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../trajectory/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
