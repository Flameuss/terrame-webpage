<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Environment - TerraME</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Environment";
        var mkdocs_page_input_path = "base/types/environment.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/terrameee.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">TerraME: Multiparadigm Modeling Toolkit</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Base</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../">Index</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Types</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../agent/">Agent</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../automaton/">Automaton</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cell/">Cell</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cellularSpace/">CellularSpace</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../chart/">Chart</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../choice/">Choice</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../clock/">Clock</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../dataFrame/">DataFrame</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../directory/">Directory</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Environment</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#arguments">Arguments</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add">add</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_1">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_1">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#createplacement">createPlacement</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_2">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_2">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gettime">getTime</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#usage_3">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#loadneighborhood">loadNeighborhood</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_3">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_4">Usage</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#notify">notify</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_4">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_5">Usage</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#run">run</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#arguments_5">Arguments</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#usage_6">Usage</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../event/">Event</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../file/">File</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../flow/">Flow</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../group/">Group</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../internetSender/">InternetSender</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../jump/">Jump</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../log/">Log</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mandatory/">Mandatory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../map/">Map</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../model/">Model</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../neighborhood/">Neighborhood</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../profiler/">Profiler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../random/">Random</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../socialNetwork/">SocialNetwork</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../society/">Society</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../state/">State</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../textScreen/">TextScreen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../timer/">Timer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../trajectory/">Trajectory</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../unitTest/">UnitTest</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../visualTable/">VisualTable</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Functions</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/errorHandling/">ErrorHandling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/os/">Os</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/package/">Package</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../functions/utils/">Utils</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/">Examples</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../data/">Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../font/">Font</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">TerraME</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Base</li>
          <li class="breadcrumb-item">Types</li>
      <li class="breadcrumb-item active">Environment</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="environment">Environment</h1>
<p>A container that encapsulates space, time, behavior, and other Environments. Objects can be added directly when the Environment is declared or after it has been instantiated. It can control the simulation engine, synchronizing all the <a href="../timer/">Timers</a> within it, or instantiate relations between sets of objects. Calling <a href="../../functions/utils/#foreachelement">forEachElement()</a> traverses each object of an Environment. If the Environment has a set of <a href="../model/">Model</a> instances, it is possible to call <a href="../../functions/utils/#forEachModel">forEachModel()</a> to traverse them.  </p>
<h3 id="arguments">Arguments</h3>
<ul>
<li><strong>...</strong>: <a href="../agent/">Agents</a>, <a href="../automaton/">Automatons</a>, <a href="../cell/">Cells</a>, <a href="../cellularSpace/">CellularSpaces</a>, <a href="../society/">Societies</a>, <a href="../trajectory/">Trajectories</a>, <a href="../group/">Groups</a>, Timers, Environments, or instances of Models.</li>
</ul>
<h3 id="attributes">Attributes</h3>
<p>Some attributes of Environment have internal semantics. They can be used as <strong>read-only</strong> by the modeler.</p>
<ul>
<li><strong>cObj_</strong>: A pointer to a C++ representation of the Environment. Never use this object.</li>
</ul>
<h3 id="usage">Usage</h3>
<div class="highlight"><pre><span></span><code>environment = Environment{
    cs1 = CellularSpace{xdim = 10},
    ag1 = Agent{},
    t1 = Timer{}
}
</code></pre></div>
<hr />
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="./#add">add</a></td>
<td>Add an element to the Environment.</td>
</tr>
<tr>
<td><a href="./#createplacement">createPlacement</a></td>
<td>Create relations between behavioural entities (<a href="../agent/">Agents</a>) and spatial entities (<a href="../cell/">Cells</a>).</td>
</tr>
<tr>
<td><a href="./#gettime">getTime</a></td>
<td>Return the older simulation time of its <a href="../timer/">Timers</a>.</td>
</tr>
<tr>
<td><a href="./#loadneighborhood">loadNeighborhood</a></td>
<td>Load a <a href="../neighborhood/">Neighborhood</a> between two different <a href="../cellularSpace/">CellularSpaces</a>.</td>
</tr>
<tr>
<td><a href="./#notify">notify</a></td>
<td>Notify every Observer connected to the Environment.</td>
</tr>
<tr>
<td><a href="./#run">run</a></td>
<td>Run the Environment until a given time.</td>
</tr>
</tbody>
</table>
<h2 id="add"><strong>add</strong></h2>
<p>Add an element to the Environment.  </p>
<h3 id="arguments_1">Arguments</h3>
<ul>
<li><strong>#1</strong>: An <a href="../agent/">Agent</a>, <a href="../automaton/">Automaton</a>, <a href="../cell/">Cell</a>, <a href="../cellularSpace/">CellularSpace</a>, <a href="../society/">Society</a>, <a href="../trajectory/">Trajectory</a>, <a href="../group/">Group</a>, <a href="../event/">Event</a>, <a href="../timer/">Timer</a>, Environment, or table. When adding a table, this function converts the table into an Event. When adding an Event, this function converts the Event into a Timer that contains the Event itself.</li>
</ul>
<h3 id="usage_1">Usage</h3>
<div class="highlight"><pre><span></span><code>environment = Environment{}

cs1 = CellularSpace{xdim = 10}
ag1 = Agent{}
t1 = Timer{}

environment:add(cs1)
environment:add(ag1)
environment:add(t1)
</code></pre></div>
<hr />
<h2 id="createplacement"><strong>createPlacement</strong></h2>
<p>Create relations between behavioural entities (<a href="../agent/">Agents</a>) and spatial entities (<a href="../cell/">Cells</a>). It is possible to have more than one behavioural entity within the Environment, but it must have only one <a href="../cellularSpace/">CellularSpace</a>, <a href="../trajectory/">Trajectory</a>, or Cell. When distributing Agents over a Trajectory or a Cell, the Agents will be able to move over the whole CellularSpace. Note that this function uses rules that will be used only to build the placement. It is up to the modeler to implement such rules for the rest of the simulation if needed. For example, one can use argument max equals to one to indicate that the placement must have at most one Agent per Cell, but it works only to create the placement, having no effect along the simulation.  </p>
<h3 id="arguments_2">Arguments</h3>
<ul>
<li><strong>max</strong>: A number representing the maximum number of Agents that can enter in the same Cell when creating the placement. As default it will add at most one Agent per Cell. Note that using this argument does not ensure a maximum number of agents inside Cells along the simulation - controlling the maximum is always up to the modeler.</li>
<li><strong>name</strong>: A string with the name of the relation. The default value is "placement", which means that the modeler can use <a href="../agent/#enter">Agent:enter()</a>, <a href="../agent/#move">Agent:move()</a>, and <a href="../agent/#leave">Agent:leave()</a> without needing to refer to the name of the placement. If the name is different from the default value, the modeler will have to use the last argument of these functions with the name of the placement.</li>
<li><strong>strategy</strong>: A string containing the strategy to be used to create a placement between Agents and Cells. See the options below:</li>
</ul>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Description</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td>"random"(default)</td>
<td>Choose a Cell randomly and put max agents also chosen randomly. Repeat this process until allocate all Agents. The last Cell chosen might have less than max Agents. All the Cells that were not chosen in this process will remain empty.</td>
<td>max, name</td>
</tr>
<tr>
<td>"spread"</td>
<td>Choose a Cell randomly and put one agent also chosen randomly. Repeat this process until allocate all Agents. This strategy guarantees that the quantity of agents in each cell is up to max Agents.</td>
<td>max, name</td>
</tr>
<tr>
<td>"uniform"</td>
<td>Create placements uniformly. The first Agent enters in the first Cell, the second one in the second Cell, and so on. If it reaches the last Cell of the CellularSpace or Trajectory then it starts again in the first Cell. The last Cells will contain fewer Agents if the number of Agents is not proportional to the number of Cells. For example, placing a <a href="../society/">Society</a> with four Agents into a CellularSpace of three Cells will put two Agents in the first Cell and one in the other two Cells.</td>
<td>name</td>
</tr>
<tr>
<td>"void"</td>
<td>This strategy creates an empty placement in each Cell and Agent. It is necessary to use this strategy if the modeler needs to establish the relations between Agents and Cells by himself/herself. In this case, Agents cannot use <a href="../agent/#move">Agent:move()</a> or <a href="../agent/#walk">Agent:walk()</a> before calling <a href="../agent/#enter">Agent:enter()</a> explicitly.</td>
<td>name</td>
</tr>
</tbody>
</table>
<h3 id="usage_2">Usage</h3>
<div class="highlight"><pre><span></span><code>ag = Agent{}

soc = Society{
    instance = ag,
    quantity = 20
}

cs = CellularSpace{xdim = 10}
env = Environment{soc, cs}
env:createPlacement()
</code></pre></div>
<hr />
<h2 id="gettime"><strong>getTime</strong></h2>
<p>Return the older simulation time of its <a href="../timer/">Timers</a>.  </p>
<h3 id="usage_3">Usage</h3>
<div class="highlight"><pre><span></span><code>env = Environment{
    Timer{Event{action = function() end}}
}

env:run(10)
print(env:getTime())
</code></pre></div>
<hr />
<h2 id="loadneighborhood"><strong>loadNeighborhood</strong></h2>
<p>Load a <a href="../neighborhood/">Neighborhood</a> between two different <a href="../cellularSpace/">CellularSpaces</a>.  </p>
<h3 id="arguments_3">Arguments</h3>
<ul>
<li><strong>bidirect</strong>: A boolean value. If true then, for each relation from <a href="../cell/">Cell</a> a to Cell b loaded from the file, it will also create a relation from b to a. The default value is false.</li>
<li><strong>file</strong>: A <a href="../file/">File</a> or a string with the name of the file to be loaded.</li>
<li><strong>name</strong>: A string with the name of the relation to be created. The default value is "1".</li>
</ul>
<h3 id="usage_4">Usage</h3>
<div class="highlight"><pre><span></span><code>river = CellularSpace{
    file = filePath(&quot;river.shp&quot;)
}

emas = CellularSpace{
    file = filePath(&quot;emas.shp&quot;)
}

env = Environment{emas, river}
env:loadNeighborhood{file = filePath(&quot;gpmlinesDbEmas.gpm&quot;, &quot;base&quot;)}
</code></pre></div>
<h3 id="see-also">See also</h3>
<ul>
<li><a href="../../functions/package/#filepath">filePath (Package)</a></li>
</ul>
<hr />
<h2 id="notify"><strong>notify</strong></h2>
<p>Notify every Observer connected to the Environment.  </p>
<h3 id="arguments_4">Arguments</h3>
<ul>
<li><strong>#1</strong>: A number representing the notification time. The default value is zero. It is also possible to use an <a href="../event/">Event</a> as argument. In this case, it will use the result of <a href="../event/#gettime">Event:getTime()</a>.</li>
</ul>
<h3 id="usage_5">Usage</h3>
<div class="highlight"><pre><span></span><code>env = Environment{}
env:notify()
</code></pre></div>
<hr />
<h2 id="run"><strong>run</strong></h2>
<p>Run the Environment until a given time. It activates the <a href="../timer/">Timers</a> it contains, the Timers of the Environments it contains, and so on.  </p>
<h3 id="arguments_5">Arguments</h3>
<ul>
<li><strong>#1</strong>: A number representing the final time. This funcion will stop when there is no <a href="../event/">Event</a> scheduled to a time less or equal to the final time. When using instances of <a href="../model/">Models</a> within the Environment (to simulate them at the same time), this argument is optional. In this case, the default value is the greater final time amongst all instances.</li>
</ul>
<h3 id="usage_6">Usage</h3>
<div class="highlight"><pre><span></span><code>env = Environment{
    Timer{Event{action = function()
        print(&quot;execute 1&quot;)
    end}},
    Timer{Event{action = function()
        print(&quot;execute 2&quot;)
    end}}
}
env:run(10)
</code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../directory/" class="btn btn-neutral float-left" title="Directory"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../event/" class="btn btn-neutral float-right" title="Event">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2024 TerraME</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../directory/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../event/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
